momentum-geb-pom
================

Momentum User tests with Geb using inline scripting and Spock tests via gradle, extending the Page Object Model.

The tests assume you have Momentum Storefront running on localhost on port 8080, either local on your host or in a VM with port forwarding.

Includes the gradle wrapper if you don't have gradle installed.
For all gradle executions below use the wrapper:
	./gradlew [task...] [option ...]
or if you have gradle installed:
	gradle [task...] [option ...]

As we are using the Page Object Model (POM but not Maven POM as we build with gradle), we need to compile our Page and Module classes first.

	gradle testClasses

The default gradle task is 'testClasses' so you don't need to include an actual task, but also its before test or build so executing scripts doesn't execute the Spock tests.

The following command will launch the tests with firefox browser only:

    gradle -PwebTests

Running the test task will run the Spock equivalents

	gradle test
	
As we now using configuration via GebConfig the baseUrl is set to http://localhost:8080, but you can override this with any environment 
by adding the environment and its URL to GebConfig, e.g.

	environments {
		uat {
			baseUrl = "http://live.uat.myhosted.momentum.com"
		}
	}
The above is just an example - you need to substitute with a real URL.
Also if Basic Authentication is required you may need to install a forefox plugin such as AutoAuth to avoid having to sign in for each test.
	
Then run with the specific environment to start with that environment's base Url:

	gradle -PwebTests -Pgeb.env=uat 
	
Finally there is a very simple configuration integration into the GebConfig to move the hardcoded titles and content in files into configuration,
which can be autogenerated together with the classes themselves at this point (TODO)

	momentum {
		siteTitlePrefix = "Spindrift Momentum -- "
		homePageTitleSuffix = 'Welcome to the home of online shopping.'
		homePageTitle = "${siteTitlePrefix}${homePageTitleSuffix}"
		registrationPageTitle = "${siteTitlePrefix}Register"
		loginPageTitle = "${siteTitlePrefix}Login"
	}
	
Then its simply access in the page class as:

	static at = { title == momentum.homePageTitle }
	
	